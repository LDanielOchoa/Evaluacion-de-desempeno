exports.id=317,exports.ids=[317],exports.modules={45531:(e,a,t)=>{Promise.resolve().then(t.bind(t,55123))},21971:(e,a,t)=>{Promise.resolve().then(t.bind(t,91167))},58216:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,13219,23)),Promise.resolve().then(t.t.bind(t,34863,23)),Promise.resolve().then(t.t.bind(t,25155,23)),Promise.resolve().then(t.t.bind(t,40802,23)),Promise.resolve().then(t.t.bind(t,9350,23)),Promise.resolve().then(t.t.bind(t,48530,23)),Promise.resolve().then(t.t.bind(t,88921,23))},21768:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,66959,23)),Promise.resolve().then(t.t.bind(t,33875,23)),Promise.resolve().then(t.t.bind(t,88903,23)),Promise.resolve().then(t.t.bind(t,57174,23)),Promise.resolve().then(t.t.bind(t,84178,23)),Promise.resolve().then(t.t.bind(t,87190,23)),Promise.resolve().then(t.t.bind(t,61365,23))},91167:(e,a,t)=>{"use strict";t.d(a,{J:()=>o,UserProvider:()=>n});var r=t(45512),s=t(58009);let i=(0,s.createContext)(void 0);function n({children:e}){let[a,t]=(0,s.useState)(null),[n,o]=(0,s.useState)(null);return(0,r.jsx)(i.Provider,{value:{userData:a,setUserData:t,user:n,setUser:o},children:e})}function o(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},35651:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>V});var r=t(45512),s=t(24540),i=t(6648),n=t(58009),o=t(79334),l=t(25409),c=t(87798),d=t(90138),u=t(99905),m=t(15907),x=t(45103),p=t(22403),h=t(44269);function g({isOpen:e,onClose:a}){return(0,r.jsx)(i.N,{children:e&&(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,r.jsxs)(s.P.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-red-600",children:"C\xe9dula no encontrada"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)(h.A,{size:24})})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Lo sentimos, la c\xe9dula ingresada no se encuentra en nuestra base de datos. Por favor, verifique el n\xfamero e intente nuevamente."}),(0,r.jsx)("button",{onClick:a,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition duration-200",children:"Cerrar"})]})})})}var y=t(91167),f=t(67418);let v=({message:e})=>(0,r.jsx)(i.N,{children:e&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"flex items-center p-4 mb-4 text-sm text-red-800 border border-red-300 rounded-lg bg-red-50",role:"alert",children:[(0,r.jsx)(f.A,{className:"flex-shrink-0 inline w-4 h-4 mr-3"}),(0,r.jsx)("span",{className:"sr-only",children:"Error"}),(0,r.jsx)("div",{children:e})]})});var b=t(87021),j=t(70384),N=t(56937),w=t(69208),P=t(21956),C=t(48458),I=t(46583),S=t(72734),A=t(53847),E=t(45723),O=t(1704),T=t(44901),k=t(35668);let _=[{id:"mascota",label:"Nombre de tu mascota",icon:A.A,component:function({answer:e,setAnswer:a,confirmAnswer:t,setConfirmAnswer:i,error:n,setError:o}){return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(A.A,{className:"w-6 h-6"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Nombre de tu mascota"})]}),(0,r.jsx)(l.p,{type:"text",placeholder:"Ingresa el nombre de tu mascota",value:e,onChange:e=>{a(e.target.value),o("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)(l.p,{type:"text",placeholder:"Confirma el nombre de tu mascota",value:t,onChange:e=>{i(e.target.value),o("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),n&&(0,r.jsx)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm",children:n}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Esta respuesta ser\xe1 guardada y podr\xe1 ser utilizada para recuperar tu cuenta en caso de olvido de contrase\xf1a."})]})}},{id:"fecha",label:"Una fecha importante",icon:E.A,component:function({answer:e,setAnswer:a,confirmAnswer:t,setConfirmAnswer:i,error:n,setError:o}){return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(E.A,{className:"w-6 h-6"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Una fecha importante"})]}),(0,r.jsx)(l.p,{type:"date",value:e,onChange:e=>{a(e.target.value),o("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)(l.p,{type:"date",value:t,onChange:e=>{i(e.target.value),o("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),n&&(0,r.jsx)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm",children:n}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Esta fecha ser\xe1 guardada y podr\xe1 ser utilizada para recuperar tu cuenta en caso de olvido de contrase\xf1a."})]})}},{id:"palabra",label:"Una palabra secreta",icon:O.A,component:function({answer:e,setAnswer:a,confirmAnswer:t,setConfirmAnswer:i,error:n,setError:o}){return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(O.A,{className:"w-6 h-6"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Una palabra secreta"})]}),(0,r.jsx)(l.p,{type:"text",placeholder:"Ingresa una palabra secreta",value:e,onChange:e=>{a(e.target.value),o("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)(l.p,{type:"text",placeholder:"Confirma tu palabra secreta",value:t,onChange:e=>{i(e.target.value),o("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),n&&(0,r.jsx)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm",children:n}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Esta palabra ser\xe1 guardada y podr\xe1 ser utilizada para recuperar tu cuenta en caso de olvido de contrase\xf1a."})]})}},{id:"numero",label:"Un n\xfamero secreto",icon:T.A,component:function({answer:e,setAnswer:a,confirmAnswer:t,setConfirmAnswer:i,error:n,setError:o}){return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(T.A,{className:"w-6 h-6"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Un n\xfamero secreto"})]}),(0,r.jsx)(l.p,{type:"number",placeholder:"Ingresa un n\xfamero secreto",value:e,onChange:e=>{a(e.target.value),o("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)(l.p,{type:"number",placeholder:"Confirma tu n\xfamero secreto",value:t,onChange:e=>{i(e.target.value),o("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),n&&(0,r.jsx)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm",children:n}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Este n\xfamero ser\xe1 guardado y podr\xe1 ser utilizado para recuperar tu cuenta en caso de olvido de contrase\xf1a."})]})}}];function z({onSubmit:e}){let[a,t]=(0,n.useState)(null),[o,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),x=e=>{t(e),l(""),d(""),m("")};return(0,r.jsx)(i.N,{mode:"wait",children:a?(0,r.jsxs)(s.P.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"space-y-4",children:[(0,r.jsxs)(b.$,{variant:"ghost",onClick:()=>{t(null),l(""),d(""),m("")},className:"mb-4 text-green-600 hover:text-green-700",children:[(0,r.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"Volver a las opciones"]}),a&&(0,r.jsx)("div",{className:"mt-4",children:(()=>{let e=_.find(e=>e.id===a)?.component||"div";return(0,r.jsx)(e,{answer:o,setAnswer:l,confirmAnswer:c,setConfirmAnswer:d,error:u,setError:m})})()}),(0,r.jsx)(b.$,{onClick:()=>{if(!a||!o||!c){m("Por favor complete todos los campos");return}if(o!==c){m("Las respuestas no coinciden. Por favor, int\xe9ntalo de nuevo.");return}e(a,o)},className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:!o||!c||!a,children:"Guardar respuesta"})]},"question-detail"):(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-2 gap-4",children:_.map(e=>(0,r.jsxs)(s.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-4 rounded-lg cursor-pointer bg-gray-100 hover:bg-green-100 transition-colors duration-200",onClick:()=>x(e.id),children:[(0,r.jsx)(e.icon,{className:"w-8 h-8 text-green-500 mb-2"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:e.label})]},e.id))},"question-grid")})}function R({strength:e}){let a=e=>e<=25?"D\xe9bil":e<=50?"Regular":e<=75?"Buena":"Fuerte";return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Fortaleza de la contrase\xf1a:"}),(0,r.jsx)(s.P.span,{className:"text-sm font-medium",initial:{opacity:0},animate:{opacity:1},children:a(e)},a(e))]}),(0,r.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,r.jsx)(s.P.div,{className:`h-full ${e<=25?"bg-red-500":e<=50?"bg-orange-500":e<=75?"bg-yellow-500":"bg-green-500"}`,initial:{width:0},animate:{width:`${e}%`},transition:{duration:.5,ease:"easeInOut"}})})]})}function U({isOpen:e,onClose:a,userData:t,onSecurityUpdate:o}){let[c,d]=(0,n.useState)(1),[m,x]=(0,n.useState)(t?.cedula||""),[p,h]=(0,n.useState)(""),[g,y]=(0,n.useState)(""),[v,A]=(0,n.useState)(""),[E,O]=(0,n.useState)(""),[T,k]=(0,n.useState)(""),[_,U]=(0,n.useState)(""),[D,V]=(0,n.useState)(""),[$,L]=(0,n.useState)(!1),[M,F]=(0,n.useState)(!1),[H,Y]=(0,n.useState)(0),q=e=>e.length>=8&&/[a-zA-Z]/.test(e)&&/\d/.test(e),G=async()=>{if(!p||!g||!v){U("Todos los campos son requeridos");return}if(!q(g)){U("La contrase\xf1a debe tener al menos 8 caracteres y contener letras y n\xfameros");return}if(g!==v){U("Las contrase\xf1as no coinciden");return}L(!0);try{let e=await fetch("https://evaluacion-de-desempeno.onrender.com/change_password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CEDULA:Number(m),oldPassword:p,newPassword:g,confirmPassword:v})});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let a=await e.json();a.success?(V("Contrase\xf1a actualizada correctamente"),setTimeout(()=>{V(""),d(2)},2e3)):U(a.error||"Error al cambiar la contrase\xf1a")}catch(e){console.error("Error al cambiar la contrase\xf1a:",e),U("Error al cambiar la contrase\xf1a: "+e.message)}finally{L(!1)}},J=async(e,r)=>{L(!0);try{let s=await fetch("https://evaluacion-de-desempeno.onrender.com/update_security_question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,securityQuestion:e,securityAnswer:r})}),i=await s.json();i.success?(V(i.message||"Pregunta de seguridad actualizada correctamente"),setTimeout(()=>{o({...t,requiresSecurityUpdate:!1}),a()},2e3)):U(i.error||"Error al actualizar la pregunta de seguridad")}catch(e){console.error("Error al actualizar la pregunta de seguridad:",e),U("Error al actualizar la pregunta de seguridad")}finally{L(!1)}};return e?(0,r.jsx)(i.N,{children:e&&(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:a,children:(0,r.jsxs)(s.P.div,{variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.8,transition:{duration:.3,ease:"easeIn"}}},initial:"hidden",animate:"visible",exit:"exit",className:"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)(s.P.div,{className:"flex items-center mb-6",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[(0,r.jsx)(j.A,{className:"w-10 h-10 text-green-500 mr-3"}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-green-700",children:"Actualizaci\xf3n de Seguridad"})]}),(0,r.jsx)(i.N,{mode:"wait",children:(0,r.jsx)(s.P.div,{variants:{hidden:{x:20,opacity:0},visible:{x:0,opacity:1,transition:{duration:.3}},exit:{x:-20,opacity:0,transition:{duration:.3}}},initial:"hidden",animate:"visible",exit:"exit",children:1===c?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,r.jsx)(l.p,{type:"text",placeholder:"C\xe9dula",value:m,onChange:e=>x(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(N.A,{className:"w-5 h-5 text-green-500"})})}),(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,r.jsx)(l.p,{type:M?"text":"password",placeholder:"Contrase\xf1a actual",value:p,onChange:e=>h(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(s.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>F(!M),children:M?(0,r.jsx)(w.A,{className:"w-5 h-5 text-green-500 cursor-pointer"}):(0,r.jsx)(P.A,{className:"w-5 h-5 text-green-500 cursor-pointer"})})})}),(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,r.jsx)(l.p,{type:M?"text":"password",placeholder:"Nueva contrase\xf1a",value:g,onChange:e=>y(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(C.A,{className:"w-5 h-5 text-green-500"})})}),(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,r.jsx)(l.p,{type:M?"text":"password",placeholder:"Confirmar nueva contrase\xf1a",value:v,onChange:e=>A(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(C.A,{className:"w-5 h-5 text-green-500"})})}),(0,r.jsx)(R,{strength:H}),(0,r.jsxs)(i.N,{children:[_&&(0,r.jsxs)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 flex items-center",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 mr-2"}),_]}),D&&(0,r.jsxs)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-green-500 flex items-center",children:[(0,r.jsx)(I.A,{className:"w-4 h-4 mr-2"}),D]})]}),(0,r.jsx)(s.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsxs)(b.$,{onClick:G,className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:$,children:[$?(0,r.jsx)(s.P.div,{animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"},children:(0,r.jsx)(S.A,{className:"w-4 h-4 mr-2"})}):(0,r.jsx)(C.A,{className:"w-4 h-4 mr-2"}),$?"Cambiando...":"Cambiar contrase\xf1a"]})})]}):(0,r.jsx)(z,{onSubmit:J})},c)}),1===c&&(0,r.jsxs)(s.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-4 text-sm text-gray-500 flex items-center justify-end cursor-pointer",onClick:()=>d(2),whileHover:{scale:1.05},children:[(0,r.jsx)("span",{children:"Siguiente: Pregunta de seguridad"}),(0,r.jsx)(u.A,{className:"w-4 h-4 ml-1"})]}),2===c&&(0,r.jsxs)(s.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-4 text-sm text-gray-500 flex items-center justify-start cursor-pointer",onClick:()=>d(1),whileHover:{scale:1.05},children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-1 rotate-180"}),(0,r.jsx)("span",{children:"Volver: Cambio de contrase\xf1a"})]})]})})}):null}function D({isOpen:e,onClose:a}){let[t,o]=(0,n.useState)("cedula"),[d,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[p,h]=(0,n.useState)(""),[g,y]=(0,n.useState)(""),[v,N]=(0,n.useState)(""),[w,P]=(0,n.useState)(0),[S,A]=(0,n.useState)(""),[E,O]=(0,n.useState)(""),[T,_]=(0,n.useState)(!1),z=async()=>{if(!d){A("Por favor ingrese su c\xe9dula");return}_(!0);try{let e=await fetch("https://evaluacion-de-desempeno.onrender.com/get_security_question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d})}),a=await e.json();a.success?(x(a.securityQuestion),o("security"),A("")):A(a.error||"Usuario no encontrado")}catch(e){A("Error al verificar la c\xe9dula")}finally{_(!1)}},R=async()=>{if(!p){A("Por favor ingrese su respuesta");return}_(!0);try{let e=await fetch("https://evaluacion-de-desempeno.onrender.com/verify_security_answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,securityAnswer:p})});if((await e.json()).success)o("reset"),A(""),P(0);else{let e=w+1;P(e),e>=3?(A("Ha excedido el n\xfamero m\xe1ximo de intentos. Por favor contacte al administrador."),setTimeout(()=>{a()},3e3)):A(`Respuesta incorrecta. Intentos restantes: ${3-e}`),h("")}}catch(e){A("Error al verificar la respuesta")}finally{_(!1)}},U=async()=>{if(!g||!v){A("Por favor complete todos los campos");return}if(g!==v){A("Las contrase\xf1as no coinciden");return}if(g.length<8||!/[a-zA-Z]/.test(g)||!/\d/.test(g)){A("La contrase\xf1a debe tener al menos 8 caracteres y contener letras y n\xfameros");return}_(!0);try{let e=await fetch("https://evaluacion-de-desempeno.onrender.com/reset_password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,newPassword:g})}),t=await e.json();t.success?(O("Contrase\xf1a actualizada correctamente"),setTimeout(()=>{a()},2e3)):A(t.error||"Error al actualizar la contrase\xf1a")}catch(e){A("Error al actualizar la contrase\xf1a")}finally{_(!1)}};return e?(0,r.jsx)(i.N,{children:(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:a,children:(0,r.jsxs)(s.P.div,{variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.8,transition:{duration:.3,ease:"easeIn"}}},initial:"hidden",animate:"visible",exit:"exit",className:"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center mb-6",children:[(0,r.jsx)(j.A,{className:"w-8 h-8 text-green-500 mr-3"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-700",children:"Recuperar Contrase\xf1a"})]}),(0,r.jsxs)(i.N,{mode:"wait",children:["cedula"===t&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Ingrese su c\xe9dula"}),(0,r.jsx)(l.p,{type:"text",value:d,onChange:e=>u(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(c.A,{className:"w-5 h-5 text-green-500"})})]}),(0,r.jsx)(b.$,{onClick:z,className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:T,children:T?"Verificando...":"Continuar"})]},"cedula"),"security"===t&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[(0,r.jsxs)(b.$,{variant:"ghost",onClick:()=>o("cedula"),className:"mb-4 text-green-600 hover:text-green-700",children:[(0,r.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"Volver"]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:m}),(0,r.jsx)(l.p,{type:"text",value:p,onChange:e=>h(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500"})]}),(0,r.jsx)(b.$,{onClick:R,className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:T,children:T?"Verificando...":"Verificar respuesta"})]},"security"),"reset"===t&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Nueva contrase\xf1a"}),(0,r.jsx)(l.p,{type:"password",value:g,onChange:e=>y(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(C.A,{className:"w-5 h-5 text-green-500"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Confirmar contrase\xf1a"}),(0,r.jsx)(l.p,{type:"password",value:v,onChange:e=>N(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(C.A,{className:"w-5 h-5 text-green-500"})})]}),(0,r.jsx)(b.$,{onClick:U,className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:T,children:T?"Actualizando...":"Actualizar contrase\xf1a"})]},"reset")]}),S&&(0,r.jsxs)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4 text-red-500 flex items-center",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 mr-2"}),S]}),E&&(0,r.jsxs)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4 text-green-500 flex items-center",children:[(0,r.jsx)(I.A,{className:"w-4 h-4 mr-2"}),E]})]})})}):null}function V(){let e=(0,o.useRouter)(),{setUserData:a}=(0,y.J)(),[t,h]=(0,n.useState)(!1),[f,b]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[w,P]=(0,n.useState)(!1),[C,I]=(0,n.useState)(!1),[S,A]=(0,n.useState)(!1),[E,O]=(0,n.useState)(""),[T,k]=(0,n.useState)(!1),[_,z]=(0,n.useState)(!1),[R,V]=(0,n.useState)(null),$=async t=>{if(t.preventDefault(),O(""),!f||!j){O("Por favor ingrese su usuario y contrase\xf1a");return}h(!0);try{let t=await fetch("https://evaluacion-de-desempeno.onrender.com/validate_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f,password:j})}),r=await t.json();if(!t.ok)throw Error(r.error||"Error en la validaci\xf3n");if(r.valid){let t={CEDULA:Number.parseInt(f),NOMBRE:r.nombre,CARGO:r.cargo,CENTRO_DE_COSTO:r.centro_de_costo,LIDER_EVALUADOR:r.lider_evaluador,CARGO_DE_LIDER_EVALUADOR:r.cargo_de_lider_evaluador,ESTADO:r.estado,ANO_INGRESO:r.ano_ingreso,MES_INGRESO:r.mes_ingreso,ANOS:r.anos,ANTIGUEDAD:r.antiguedad};r.requiresSecurityUpdate?(V(t),k(!0)):(a(t),p.oR.success(`Bienvenido, ${r.nombre}`),t.CARGO.startsWith("DIRECTOR")||t.CARGO.startsWith("COORDINADOR")?e.push("/post-login"):e.push("/formulario"))}else O("Usuario o contrase\xf1a incorrectos")}catch(e){console.error("Error:",e),O(e.message||"Error al validar el usuario")}finally{h(!1)}},L={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},M={animate:{y:[0,-20,0],transition:{duration:4,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"}}},F=Array.from({length:30},(e,a)=>({id:a,size:120*Math.random()+80,initialX:100*Math.random(),initialY:100*Math.random(),duration:8*Math.random()+15,delay:2*Math.random(),color:`hsl(${60*Math.random()+100}, ${30*Math.random()+70}%, ${20*Math.random()+70}%)`})),H=e=>{let a=e.target.value;"username"===e.target.name?b(a):"password"===e.target.name&&N(a),A("use client"===a.toLowerCase())};return(0,r.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-br from-green-100 to-green-200 p-4 md:p-8 flex items-center justify-center relative overflow-hidden",children:[F.map(e=>(0,r.jsx)(s.P.div,{className:"absolute rounded-full mix-blend-multiply filter blur-md",style:{width:e.size,height:e.size,left:`${e.initialX}%`,top:`${e.initialY}%`,backgroundColor:e.color},initial:{x:0,y:0,scale:1,opacity:.4},animate:{x:[0,50*Math.random()-25,0],y:[0,50*Math.random()-25,0],scale:[1,1.1,1],opacity:[.4,.6,.4]},transition:{duration:e.duration,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut",delay:e.delay}},e.id)),(0,r.jsx)(s.P.div,{className:"absolute top-0 left-0 w-[1000px] h-[1000px] rounded-full bg-green-300/10 filter blur-3xl",initial:{x:-300,y:-300,scale:1},animate:{x:[-300,0,-300],y:[-300,0,-300],scale:[1,1.2,1]},transition:{duration:15,repeat:Number.POSITIVE_INFINITY}}),(0,r.jsx)(s.P.div,{className:"absolute bottom-0 right-0 w-[800px] h-[800px] rounded-full bg-green-400/10 filter blur-3xl",initial:{x:300,y:300,scale:1.2},animate:{x:[300,0,300],y:[300,0,300],scale:[1.2,1,1.2]},transition:{duration:12,repeat:Number.POSITIVE_INFINITY}}),(0,r.jsx)(s.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},className:"w-full max-w-5xl mx-auto bg-white/30 backdrop-blur-md rounded-3xl shadow-2xl overflow-hidden",children:(0,r.jsxs)("div",{className:"relative z-10 grid lg:grid-cols-2 h-full",children:[(0,r.jsxs)(s.P.div,{variants:L,className:"p-6 md:p-12 flex flex-col justify-center relative order-2 lg:order-1",children:[(0,r.jsxs)(s.P.div,{variants:L,className:"text-center lg:text-left mb-8 relative",children:[(0,r.jsx)(s.P.div,{className:"absolute -top-20 -left-20 w-80 h-80 bg-green-300/20 rounded-full filter blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:4,repeat:Number.POSITIVE_INFINITY}}),(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"flex items-center justify-center lg:justify-start mb-4",children:[(0,r.jsx)(x.default,{src:"/sao6.png",alt:"Company Logo",width:60,height:60,className:"mr-4"}),(0,r.jsx)("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-green-500 to-green-700 bg-clip-text text-transparent",children:"Compromisos constructivos 2024"})]}),(0,r.jsx)(s.P.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-black text-lg md:text-xl relative z-10",children:"Ingrese su usuario y contrase\xf1a para comenzar"})]}),(0,r.jsx)(v,{message:E}),(0,r.jsxs)("form",{onSubmit:$,className:"space-y-6 max-w-md mx-auto lg:mx-0",children:[(0,r.jsxs)(s.P.div,{variants:L,className:"space-y-4",children:[(0,r.jsx)("div",{className:"relative group",children:(0,r.jsxs)(s.P.div,{whileHover:{scale:1.02},className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-300/20 to-green-500/20 rounded-2xl blur"}),(0,r.jsx)(c.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-black"}),(0,r.jsx)(l.p,{type:"text",name:"username",placeholder:"Ingrese su usuario",value:f,onChange:H,className:"h-12 md:h-14 pl-12 rounded-2xl border-2 border-green-200 bg-white/60 backdrop-blur-sm focus:bg-white/80 focus:border-green-400 transition-all duration-300 relative z-10"})]})}),(0,r.jsx)("div",{className:"relative group",children:(0,r.jsxs)(s.P.div,{whileHover:{scale:1.02},className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-300/20 to-green-500/20 rounded-2xl blur"}),(0,r.jsx)(d.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-black"}),(0,r.jsx)(l.p,{type:"password",name:"password",placeholder:"Ingrese su contrase\xf1a",value:j,onChange:H,className:"h-12 md:h-14 pl-12 rounded-2xl border-2 border-green-200 bg-white/60 backdrop-blur-sm focus:bg-white/80 focus:border-green-400 transition-all duration-300 relative z-10"})]})})]}),(0,r.jsx)(s.P.div,{variants:L,className:"flex justify-between items-center",children:(0,r.jsxs)(s.P.button,{type:"button",onClick:()=>z(!0),className:"text-sm text-green-600 hover:text-green-700 transition-colors flex items-center",whileHover:{x:5},children:["\xbfOlvidaste tu contrase\xf1a?",(0,r.jsx)(u.A,{className:"w-4 h-4 ml-1"})]})}),(0,r.jsx)(s.P.div,{variants:L,whileHover:{scale:1.02},whileTap:{scale:.98},className:"relative",children:(0,r.jsxs)(s.P.button,{type:"submit",disabled:t,onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),className:"w-full h-12 md:h-14 relative overflow-hidden rounded-2xl bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white text-base md:text-lg font-medium transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05,transition:{duration:.3,type:"spring",stiffness:300}},whileTap:{scale:.95},children:[(0,r.jsx)(s.P.div,{className:"absolute inset-0 bg-gradient-to-r from-green-400 to-green-600",style:{borderRadius:"inherit"},animate:{scale:[1,1.05,1],rotate:[0,1,-1,0]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"}}),(0,r.jsx)(i.N,{mode:"wait",children:t?(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)(s.P.div,{className:"w-6 h-6 border-4 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"}})},"loading"):(0,r.jsxs)(s.P.div,{className:"flex items-center justify-center gap-2 relative z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,r.jsx)("span",{children:"Iniciar Sesi\xf3n"}),(0,r.jsx)(s.P.div,{animate:w?{x:[0,5,0],rotate:[0,10,0]}:{},transition:{duration:1,repeat:Number.POSITIVE_INFINITY},children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]},"idle")})]})})]})]}),(0,r.jsxs)(s.P.div,{variants:L,className:"relative order-1 lg:order-2 py-8 lg:py-0",children:[(0,r.jsx)(s.P.div,{className:"absolute inset-0",style:{background:"radial-gradient(circle at 50% 50%, rgba(74, 222, 128, 0.2) 0%, rgba(22, 163, 74, 0.1) 100%)",borderRadius:"50% 50% 50% 50% / 50% 50% 50% 50%"},animate:{borderRadius:["50% 50% 50% 50% / 50% 50% 50% 50%","60% 40% 40% 60% / 60% 60% 40% 40%","50% 50% 50% 50% / 50% 50% 50% 50%"]},transition:{duration:8,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"}}),(0,r.jsx)(s.P.div,{variants:M,animate:"animate",className:"relative z-10 flex items-center justify-center h-full p-8 lg:p-12",children:(0,r.jsx)(x.default,{src:"/icon-login.png",alt:"Performance Evaluation Illustration",width:500,height:500,className:"w-full max-w-[200px] sm:max-w-[280px] lg:max-w-md h-auto drop-shadow-2xl",priority:!0})})]})]})}),(0,r.jsx)(g,{isOpen:C,onClose:()=>I(!1)}),(0,r.jsx)(U,{isOpen:T,onClose:()=>k(!1),userData:R,onSecurityUpdate:t=>{a(t),p.oR.success("Seguridad actualizada con \xe9xito"),e.push("/post-login")}}),(0,r.jsx)(D,{isOpen:_,onClose:()=>z(!1)})]})}},87021:(e,a,t)=>{"use strict";t.d(a,{$:()=>c});var r=t(45512),s=t(58009),i=t(12705),n=t(21643),o=t(59462);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef(({className:e,variant:a,size:t,asChild:s=!1,...n},c)=>{let d=s?i.DX:"button";return(0,r.jsx)(d,{className:(0,o.cn)(l({variant:a,size:t,className:e})),ref:c,...n})});c.displayName="Button"},25409:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var r=t(45512),s=t(58009),i=t(59462);let n=s.forwardRef(({className:e,type:a,...t},s)=>(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));n.displayName="Input"},59462:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var r=t(82281),s=t(94805);function i(...e){return(0,s.QP)((0,r.$)(e))}},55123:(e,a,t)=>{"use strict";t.d(a,{UserProvider:()=>s});var r=t(46760);let s=(0,r.registerClientReference)(function(){throw Error("Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/salchipapa/Documentos/login-page(1)/app/contexts/userContexts.tsx","UserProvider");(0,r.registerClientReference)(function(){throw Error("Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/salchipapa/Documentos/login-page(1)/app/contexts/userContexts.tsx","useUser")},19611:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n,metadata:()=>i});var r=t(62740),s=t(55123);t(82704);let i={title:"Evaluaci\xf3n de desempe\xf1o",description:"Created with v0"};function n({children:e}){return(0,r.jsx)("html",{lang:"es",children:(0,r.jsx)("body",{children:(0,r.jsx)(s.UserProvider,{children:e})})})}},82704:()=>{}};