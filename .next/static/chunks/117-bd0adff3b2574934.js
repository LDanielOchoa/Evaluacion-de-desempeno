"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{60285:(e,a,t)=>{t.d(a,{J:()=>o,UserProvider:()=>n});var r=t(95155),s=t(12115);let i=(0,s.createContext)(void 0);function n(e){let{children:a}=e,[t,n]=(0,s.useState)(null),[o,l]=(0,s.useState)(null);return(0,r.jsx)(i.Provider,{value:{userData:t,setUserData:n,user:o,setUser:l},children:a})}function o(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},88117:(e,a,t)=>{t.r(a),t.d(a,{default:()=>D});var r=t(95155),s=t(39124),i=t(25683),n=t(12115),o=t(76046),l=t(9955),c=t(1466),d=t(96946),u=t(46967),m=t(99053),x=t(5565),p=t(55037),g=t(40767);function h(e){let{isOpen:a,onClose:t}=e;return(0,r.jsx)(i.N,{children:a&&(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,r.jsxs)(s.P.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-red-600",children:"C\xe9dula no encontrada"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)(g.A,{size:24})})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Lo sentimos, la c\xe9dula ingresada no se encuentra en nuestra base de datos. Por favor, verifique el n\xfamero e intente nuevamente."}),(0,r.jsx)("button",{onClick:t,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition duration-200",children:"Cerrar"})]})})})}var y=t(60285),f=t(61594);let v=e=>{let{message:a}=e;return(0,r.jsx)(i.N,{children:a&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"flex items-center p-4 mb-4 text-sm text-red-800 border border-red-300 rounded-lg bg-red-50",role:"alert",children:[(0,r.jsx)(f.A,{className:"flex-shrink-0 inline w-4 h-4 mr-3"}),(0,r.jsx)("span",{className:"sr-only",children:"Error"}),(0,r.jsx)("div",{children:a})]})})};var b=t(14085),N=t(42640),j=t(92155),w=t(80738),P=t(92598),C=t(86744),I=t(73239),S=t(48686),A=t(20845),E=t(32423),O=t(25284),T=t(39877),k=t(87364);let _=[{id:"mascota",label:"Nombre de tu mascota",icon:A.A,component:function(e){let{answer:a,setAnswer:t,confirmAnswer:i,setConfirmAnswer:n,error:o,setError:c}=e;return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(A.A,{className:"w-6 h-6"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Nombre de tu mascota"})]}),(0,r.jsx)(l.p,{type:"text",placeholder:"Ingresa el nombre de tu mascota",value:a,onChange:e=>{t(e.target.value),c("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)(l.p,{type:"text",placeholder:"Confirma el nombre de tu mascota",value:i,onChange:e=>{n(e.target.value),c("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),o&&(0,r.jsx)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm",children:o}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Esta respuesta ser\xe1 guardada y podr\xe1 ser utilizada para recuperar tu cuenta en caso de olvido de contrase\xf1a."})]})}},{id:"fecha",label:"Una fecha importante",icon:E.A,component:function(e){let{answer:a,setAnswer:t,confirmAnswer:i,setConfirmAnswer:n,error:o,setError:c}=e;return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(E.A,{className:"w-6 h-6"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Una fecha importante"})]}),(0,r.jsx)(l.p,{type:"date",value:a,onChange:e=>{t(e.target.value),c("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)(l.p,{type:"date",value:i,onChange:e=>{n(e.target.value),c("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),o&&(0,r.jsx)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm",children:o}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Esta fecha ser\xe1 guardada y podr\xe1 ser utilizada para recuperar tu cuenta en caso de olvido de contrase\xf1a."})]})}},{id:"palabra",label:"Una palabra secreta",icon:O.A,component:function(e){let{answer:a,setAnswer:t,confirmAnswer:i,setConfirmAnswer:n,error:o,setError:c}=e;return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(O.A,{className:"w-6 h-6"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Una palabra secreta"})]}),(0,r.jsx)(l.p,{type:"text",placeholder:"Ingresa una palabra secreta",value:a,onChange:e=>{t(e.target.value),c("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)(l.p,{type:"text",placeholder:"Confirma tu palabra secreta",value:i,onChange:e=>{n(e.target.value),c("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),o&&(0,r.jsx)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm",children:o}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Esta palabra ser\xe1 guardada y podr\xe1 ser utilizada para recuperar tu cuenta en caso de olvido de contrase\xf1a."})]})}},{id:"numero",label:"Un n\xfamero secreto",icon:T.A,component:function(e){let{answer:a,setAnswer:t,confirmAnswer:i,setConfirmAnswer:n,error:o,setError:c}=e;return(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,r.jsx)(T.A,{className:"w-6 h-6"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Un n\xfamero secreto"})]}),(0,r.jsx)(l.p,{type:"number",placeholder:"Ingresa un n\xfamero secreto",value:a,onChange:e=>{t(e.target.value),c("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),(0,r.jsx)(l.p,{type:"number",placeholder:"Confirma tu n\xfamero secreto",value:i,onChange:e=>{n(e.target.value),c("")},className:"border-green-300 focus:ring-green-500 focus:border-green-500"}),o&&(0,r.jsx)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 text-sm",children:o}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Este n\xfamero ser\xe1 guardado y podr\xe1 ser utilizado para recuperar tu cuenta en caso de olvido de contrase\xf1a."})]})}}];function z(e){let{onSubmit:a}=e,[t,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),p=e=>{o(e),c(""),u(""),x("")};return(0,r.jsx)(i.N,{mode:"wait",children:t?(0,r.jsxs)(s.P.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"space-y-4",children:[(0,r.jsxs)(b.$,{variant:"ghost",onClick:()=>{o(null),c(""),u(""),x("")},className:"mb-4 text-green-600 hover:text-green-700",children:[(0,r.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"Volver a las opciones"]}),t&&(0,r.jsx)("div",{className:"mt-4",children:(()=>{var e;let a=(null===(e=_.find(e=>e.id===t))||void 0===e?void 0:e.component)||"div";return(0,r.jsx)(a,{answer:l,setAnswer:c,confirmAnswer:d,setConfirmAnswer:u,error:m,setError:x})})()}),(0,r.jsx)(b.$,{onClick:()=>{if(!t||!l||!d){x("Por favor complete todos los campos");return}if(l!==d){x("Las respuestas no coinciden. Por favor, int\xe9ntalo de nuevo.");return}a(t,l)},className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:!l||!d||!t,children:"Guardar respuesta"})]},"question-detail"):(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-2 gap-4",children:_.map(e=>(0,r.jsxs)(s.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-4 rounded-lg cursor-pointer bg-gray-100 hover:bg-green-100 transition-colors duration-200",onClick:()=>p(e.id),children:[(0,r.jsx)(e.icon,{className:"w-8 h-8 text-green-500 mb-2"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:e.label})]},e.id))},"question-grid")})}function R(e){let{strength:a}=e,t=e=>e<=25?"D\xe9bil":e<=50?"Regular":e<=75?"Buena":"Fuerte";return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Fortaleza de la contrase\xf1a:"}),(0,r.jsx)(s.P.span,{className:"text-sm font-medium",initial:{opacity:0},animate:{opacity:1},children:t(a)},t(a))]}),(0,r.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,r.jsx)(s.P.div,{className:"h-full ".concat(a<=25?"bg-red-500":a<=50?"bg-orange-500":a<=75?"bg-yellow-500":"bg-green-500"),initial:{width:0},animate:{width:"".concat(a,"%")},transition:{duration:.5,ease:"easeInOut"}})})]})}function U(e){let{isOpen:a,onClose:t,userData:o,onSecurityUpdate:c}=e,[d,m]=(0,n.useState)(1),[x,p]=(0,n.useState)((null==o?void 0:o.cedula)||""),[g,h]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[A,E]=(0,n.useState)(""),[O,T]=(0,n.useState)(""),[k,_]=(0,n.useState)(""),[U,V]=(0,n.useState)(""),[D,L]=(0,n.useState)(""),[M,F]=(0,n.useState)(!1),[H,Y]=(0,n.useState)(!1),[$,q]=(0,n.useState)(0);(0,n.useEffect)(()=>{q(G(y))},[y]);let G=e=>{let a=0;return e.length>=8&&(a+=25),e.match(/[a-z]/)&&(a+=25),e.match(/[A-Z]/)&&(a+=25),e.match(/\d/)&&(a+=25),a},J=e=>e.length>=8&&/[a-zA-Z]/.test(e)&&/\d/.test(e),B=async()=>{if(!g||!y||!A){V("Todos los campos son requeridos");return}if(!J(y)){V("La contrase\xf1a debe tener al menos 8 caracteres y contener letras y n\xfameros");return}if(y!==A){V("Las contrase\xf1as no coinciden");return}F(!0);try{let e=await fetch("https://evaluacion-de-desempeno.onrender.com/change_password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CEDULA:Number(x),oldPassword:g,newPassword:y,confirmPassword:A})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();a.success?(L("Contrase\xf1a actualizada correctamente"),setTimeout(()=>{L(""),m(2)},2e3)):V(a.error||"Error al cambiar la contrase\xf1a")}catch(e){console.error("Error al cambiar la contrase\xf1a:",e),V("Error al cambiar la contrase\xf1a: "+e.message)}finally{F(!1)}},Q=async(e,a)=>{F(!0);try{let r=await fetch("https://evaluacion-de-desempeno.onrender.com/update_security_question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:x,securityQuestion:e,securityAnswer:a})}),s=await r.json();s.success?(L(s.message||"Pregunta de seguridad actualizada correctamente"),setTimeout(()=>{c({...o,requiresSecurityUpdate:!1}),t()},2e3)):V(s.error||"Error al actualizar la pregunta de seguridad")}catch(e){console.error("Error al actualizar la pregunta de seguridad:",e),V("Error al actualizar la pregunta de seguridad")}finally{F(!1)}};return a?(0,r.jsx)(i.N,{children:a&&(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t,children:(0,r.jsxs)(s.P.div,{variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.8,transition:{duration:.3,ease:"easeIn"}}},initial:"hidden",animate:"visible",exit:"exit",className:"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)(s.P.div,{className:"flex items-center mb-6",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[(0,r.jsx)(N.A,{className:"w-10 h-10 text-green-500 mr-3"}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-green-700",children:"Actualizaci\xf3n de Seguridad"})]}),(0,r.jsx)(i.N,{mode:"wait",children:(0,r.jsx)(s.P.div,{variants:{hidden:{x:20,opacity:0},visible:{x:0,opacity:1,transition:{duration:.3}},exit:{x:-20,opacity:0,transition:{duration:.3}}},initial:"hidden",animate:"visible",exit:"exit",children:1===d?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,r.jsx)(l.p,{type:"text",placeholder:"C\xe9dula",value:x,onChange:e=>p(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(j.A,{className:"w-5 h-5 text-green-500"})})}),(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,r.jsx)(l.p,{type:H?"text":"password",placeholder:"Contrase\xf1a actual",value:g,onChange:e=>h(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(s.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Y(!H),children:H?(0,r.jsx)(w.A,{className:"w-5 h-5 text-green-500 cursor-pointer"}):(0,r.jsx)(P.A,{className:"w-5 h-5 text-green-500 cursor-pointer"})})})}),(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,r.jsx)(l.p,{type:H?"text":"password",placeholder:"Nueva contrase\xf1a",value:y,onChange:e=>v(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(C.A,{className:"w-5 h-5 text-green-500"})})}),(0,r.jsx)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,r.jsx)(l.p,{type:H?"text":"password",placeholder:"Confirmar nueva contrase\xf1a",value:A,onChange:e=>E(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(C.A,{className:"w-5 h-5 text-green-500"})})}),(0,r.jsx)(R,{strength:$}),(0,r.jsxs)(i.N,{children:[U&&(0,r.jsxs)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-red-500 flex items-center",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 mr-2"}),U]}),D&&(0,r.jsxs)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-green-500 flex items-center",children:[(0,r.jsx)(I.A,{className:"w-4 h-4 mr-2"}),D]})]}),(0,r.jsx)(s.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsxs)(b.$,{onClick:B,className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:M,children:[M?(0,r.jsx)(s.P.div,{animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"},children:(0,r.jsx)(S.A,{className:"w-4 h-4 mr-2"})}):(0,r.jsx)(C.A,{className:"w-4 h-4 mr-2"}),M?"Cambiando...":"Cambiar contrase\xf1a"]})})]}):(0,r.jsx)(z,{onSubmit:Q})},d)}),1===d&&(0,r.jsxs)(s.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-4 text-sm text-gray-500 flex items-center justify-end cursor-pointer",onClick:()=>m(2),whileHover:{scale:1.05},children:[(0,r.jsx)("span",{children:"Siguiente: Pregunta de seguridad"}),(0,r.jsx)(u.A,{className:"w-4 h-4 ml-1"})]}),2===d&&(0,r.jsxs)(s.P.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-4 text-sm text-gray-500 flex items-center justify-start cursor-pointer",onClick:()=>m(1),whileHover:{scale:1.05},children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-1 rotate-180"}),(0,r.jsx)("span",{children:"Volver: Cambio de contrase\xf1a"})]})]})})}):null}function V(e){let{isOpen:a,onClose:t}=e,[o,d]=(0,n.useState)("cedula"),[u,m]=(0,n.useState)(""),[x,p]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[j,w]=(0,n.useState)(""),[P,S]=(0,n.useState)(0),[A,E]=(0,n.useState)(""),[O,T]=(0,n.useState)(""),[_,z]=(0,n.useState)(!1),R=async()=>{if(!u){E("Por favor ingrese su c\xe9dula");return}z(!0);try{let e=await fetch("https://evaluacion-de-desempeno.onrender.com/get_security_question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u})}),a=await e.json();a.success?(p(a.securityQuestion),d("security"),E("")):E(a.error||"Usuario no encontrado")}catch(e){E("Error al verificar la c\xe9dula")}finally{z(!1)}},U=async()=>{if(!g){E("Por favor ingrese su respuesta");return}z(!0);try{let e=await fetch("https://evaluacion-de-desempeno.onrender.com/verify_security_answer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,securityAnswer:g})});if((await e.json()).success)d("reset"),E(""),S(0);else{let e=P+1;S(e),e>=3?(E("Ha excedido el n\xfamero m\xe1ximo de intentos. Por favor contacte al administrador."),setTimeout(()=>{t()},3e3)):E("Respuesta incorrecta. Intentos restantes: ".concat(3-e)),h("")}}catch(e){E("Error al verificar la respuesta")}finally{z(!1)}},V=async()=>{if(!y||!j){E("Por favor complete todos los campos");return}if(y!==j){E("Las contrase\xf1as no coinciden");return}if(y.length<8||!/[a-zA-Z]/.test(y)||!/\d/.test(y)){E("La contrase\xf1a debe tener al menos 8 caracteres y contener letras y n\xfameros");return}z(!0);try{let e=await fetch("https://evaluacion-de-desempeno.onrender.com/reset_password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,newPassword:y})}),a=await e.json();a.success?(T("Contrase\xf1a actualizada correctamente"),setTimeout(()=>{t()},2e3)):E(a.error||"Error al actualizar la contrase\xf1a")}catch(e){E("Error al actualizar la contrase\xf1a")}finally{z(!1)}};return a?(0,r.jsx)(i.N,{children:(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t,children:(0,r.jsxs)(s.P.div,{variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.8,transition:{duration:.3,ease:"easeIn"}}},initial:"hidden",animate:"visible",exit:"exit",className:"bg-white rounded-lg p-8 max-w-md w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center mb-6",children:[(0,r.jsx)(N.A,{className:"w-8 h-8 text-green-500 mr-3"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-green-700",children:"Recuperar Contrase\xf1a"})]}),(0,r.jsxs)(i.N,{mode:"wait",children:["cedula"===o&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Ingrese su c\xe9dula"}),(0,r.jsx)(l.p,{type:"text",value:u,onChange:e=>m(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(c.A,{className:"w-5 h-5 text-green-500"})})]}),(0,r.jsx)(b.$,{onClick:R,className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:_,children:_?"Verificando...":"Continuar"})]},"cedula"),"security"===o&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[(0,r.jsxs)(b.$,{variant:"ghost",onClick:()=>d("cedula"),className:"mb-4 text-green-600 hover:text-green-700",children:[(0,r.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"Volver"]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:x}),(0,r.jsx)(l.p,{type:"text",value:g,onChange:e=>h(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500"})]}),(0,r.jsx)(b.$,{onClick:U,className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:_,children:_?"Verificando...":"Verificar respuesta"})]},"security"),"reset"===o&&(0,r.jsxs)(s.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Nueva contrase\xf1a"}),(0,r.jsx)(l.p,{type:"password",value:y,onChange:e=>v(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(C.A,{className:"w-5 h-5 text-green-500"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Confirmar contrase\xf1a"}),(0,r.jsx)(l.p,{type:"password",value:j,onChange:e=>w(e.target.value),className:"border-green-300 focus:ring-green-500 focus:border-green-500",icon:(0,r.jsx)(C.A,{className:"w-5 h-5 text-green-500"})})]}),(0,r.jsx)(b.$,{onClick:V,className:"w-full bg-green-500 hover:bg-green-600 text-white",disabled:_,children:_?"Actualizando...":"Actualizar contrase\xf1a"})]},"reset")]}),A&&(0,r.jsxs)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4 text-red-500 flex items-center",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 mr-2"}),A]}),O&&(0,r.jsxs)(s.P.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4 text-green-500 flex items-center",children:[(0,r.jsx)(I.A,{className:"w-4 h-4 mr-2"}),O]})]})})}):null}function D(){let e=(0,o.useRouter)(),{setUserData:a}=(0,y.J)(),[t,g]=(0,n.useState)(!1),[f,b]=(0,n.useState)(""),[N,j]=(0,n.useState)(""),[w,P]=(0,n.useState)(!1),[C,I]=(0,n.useState)(!1),[S,A]=(0,n.useState)(!1),[E,O]=(0,n.useState)(""),[T,k]=(0,n.useState)(!1),[_,z]=(0,n.useState)(!1),[R,D]=(0,n.useState)(null),L=async t=>{if(t.preventDefault(),O(""),!f||!N){O("Por favor ingrese su usuario y contrase\xf1a");return}g(!0);try{let t=await fetch("https://evaluacion-de-desempeno.onrender.com/validate_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f,password:N})}),r=await t.json();if(!t.ok)throw Error(r.error||"Error en la validaci\xf3n");if(r.valid){let t={CEDULA:Number.parseInt(f),NOMBRE:r.nombre,CARGO:r.cargo,CENTRO_DE_COSTO:r.centro_de_costo,LIDER_EVALUADOR:r.lider_evaluador,CARGO_DE_LIDER_EVALUADOR:r.cargo_de_lider_evaluador,ESTADO:r.estado,ANO_INGRESO:r.ano_ingreso,MES_INGRESO:r.mes_ingreso,ANOS:r.anos,ANTIGUEDAD:r.antiguedad};r.requiresSecurityUpdate?(D(t),k(!0)):(a(t),p.oR.success("Bienvenido, ".concat(r.nombre)),t.CARGO.startsWith("DIRECTOR")||t.CARGO.startsWith("COORDINADOR")?e.push("/post-login"):e.push("/formulario"))}else O("Usuario o contrase\xf1a incorrectos")}catch(e){console.error("Error:",e),O(e.message||"Error al validar el usuario")}finally{g(!1)}},M={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},F={animate:{y:[0,-20,0],transition:{duration:4,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"}}},H=Array.from({length:30},(e,a)=>({id:a,size:120*Math.random()+80,initialX:100*Math.random(),initialY:100*Math.random(),duration:8*Math.random()+15,delay:2*Math.random(),color:"hsl(".concat(60*Math.random()+100,", ").concat(30*Math.random()+70,"%, ").concat(20*Math.random()+70,"%)")})),Y=e=>{let a=e.target.value;"username"===e.target.name?b(a):"password"===e.target.name&&j(a),A("use client"===a.toLowerCase())};return(0,r.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-br from-green-100 to-green-200 p-4 md:p-8 flex items-center justify-center relative overflow-hidden",children:[H.map(e=>(0,r.jsx)(s.P.div,{className:"absolute rounded-full mix-blend-multiply filter blur-md",style:{width:e.size,height:e.size,left:"".concat(e.initialX,"%"),top:"".concat(e.initialY,"%"),backgroundColor:e.color},initial:{x:0,y:0,scale:1,opacity:.4},animate:{x:[0,50*Math.random()-25,0],y:[0,50*Math.random()-25,0],scale:[1,1.1,1],opacity:[.4,.6,.4]},transition:{duration:e.duration,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut",delay:e.delay}},e.id)),(0,r.jsx)(s.P.div,{className:"absolute top-0 left-0 w-[1000px] h-[1000px] rounded-full bg-green-300/10 filter blur-3xl",initial:{x:-300,y:-300,scale:1},animate:{x:[-300,0,-300],y:[-300,0,-300],scale:[1,1.2,1]},transition:{duration:15,repeat:Number.POSITIVE_INFINITY}}),(0,r.jsx)(s.P.div,{className:"absolute bottom-0 right-0 w-[800px] h-[800px] rounded-full bg-green-400/10 filter blur-3xl",initial:{x:300,y:300,scale:1.2},animate:{x:[300,0,300],y:[300,0,300],scale:[1.2,1,1.2]},transition:{duration:12,repeat:Number.POSITIVE_INFINITY}}),(0,r.jsx)(s.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},className:"w-full max-w-5xl mx-auto bg-white/30 backdrop-blur-md rounded-3xl shadow-2xl overflow-hidden",children:(0,r.jsxs)("div",{className:"relative z-10 grid lg:grid-cols-2 h-full",children:[(0,r.jsxs)(s.P.div,{variants:M,className:"p-6 md:p-12 flex flex-col justify-center relative order-2 lg:order-1",children:[(0,r.jsxs)(s.P.div,{variants:M,className:"text-center lg:text-left mb-8 relative",children:[(0,r.jsx)(s.P.div,{className:"absolute -top-20 -left-20 w-80 h-80 bg-green-300/20 rounded-full filter blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:4,repeat:Number.POSITIVE_INFINITY}}),(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"flex items-center justify-center lg:justify-start mb-4",children:[(0,r.jsx)(x.default,{src:"/sao6.png",alt:"Company Logo",width:60,height:60,className:"mr-4"}),(0,r.jsx)("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-green-500 to-green-700 bg-clip-text text-transparent",children:"Compromisos constructivos 2024"})]}),(0,r.jsx)(s.P.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-black text-lg md:text-xl relative z-10",children:"Ingrese su usuario y contrase\xf1a para comenzar"})]}),(0,r.jsx)(v,{message:E}),(0,r.jsxs)("form",{onSubmit:L,className:"space-y-6 max-w-md mx-auto lg:mx-0",children:[(0,r.jsxs)(s.P.div,{variants:M,className:"space-y-4",children:[(0,r.jsx)("div",{className:"relative group",children:(0,r.jsxs)(s.P.div,{whileHover:{scale:1.02},className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-300/20 to-green-500/20 rounded-2xl blur"}),(0,r.jsx)(c.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-black"}),(0,r.jsx)(l.p,{type:"text",name:"username",placeholder:"Ingrese su usuario",value:f,onChange:Y,className:"h-12 md:h-14 pl-12 rounded-2xl border-2 border-green-200 bg-white/60 backdrop-blur-sm focus:bg-white/80 focus:border-green-400 transition-all duration-300 relative z-10"})]})}),(0,r.jsx)("div",{className:"relative group",children:(0,r.jsxs)(s.P.div,{whileHover:{scale:1.02},className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-300/20 to-green-500/20 rounded-2xl blur"}),(0,r.jsx)(d.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-black"}),(0,r.jsx)(l.p,{type:"password",name:"password",placeholder:"Ingrese su contrase\xf1a",value:N,onChange:Y,className:"h-12 md:h-14 pl-12 rounded-2xl border-2 border-green-200 bg-white/60 backdrop-blur-sm focus:bg-white/80 focus:border-green-400 transition-all duration-300 relative z-10"})]})})]}),(0,r.jsx)(s.P.div,{variants:M,className:"flex justify-between items-center",children:(0,r.jsxs)(s.P.button,{type:"button",onClick:()=>z(!0),className:"text-sm text-green-600 hover:text-green-700 transition-colors flex items-center",whileHover:{x:5},children:["\xbfOlvidaste tu contrase\xf1a?",(0,r.jsx)(u.A,{className:"w-4 h-4 ml-1"})]})}),(0,r.jsx)(s.P.div,{variants:M,whileHover:{scale:1.02},whileTap:{scale:.98},className:"relative",children:(0,r.jsxs)(s.P.button,{type:"submit",disabled:t,onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),className:"w-full h-12 md:h-14 relative overflow-hidden rounded-2xl bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white text-base md:text-lg font-medium transition-all duration-300 shadow-lg hover:shadow-xl",whileHover:{scale:1.05,transition:{duration:.3,type:"spring",stiffness:300}},whileTap:{scale:.95},children:[(0,r.jsx)(s.P.div,{className:"absolute inset-0 bg-gradient-to-r from-green-400 to-green-600",style:{borderRadius:"inherit"},animate:{scale:[1,1.05,1],rotate:[0,1,-1,0]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"}}),(0,r.jsx)(i.N,{mode:"wait",children:t?(0,r.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)(s.P.div,{className:"w-6 h-6 border-4 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"}})},"loading"):(0,r.jsxs)(s.P.div,{className:"flex items-center justify-center gap-2 relative z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,r.jsx)("span",{children:"Iniciar Sesi\xf3n"}),(0,r.jsx)(s.P.div,{animate:w?{x:[0,5,0],rotate:[0,10,0]}:{},transition:{duration:1,repeat:Number.POSITIVE_INFINITY},children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]},"idle")})]})})]})]}),(0,r.jsxs)(s.P.div,{variants:M,className:"relative order-1 lg:order-2 py-8 lg:py-0",children:[(0,r.jsx)(s.P.div,{className:"absolute inset-0",style:{background:"radial-gradient(circle at 50% 50%, rgba(74, 222, 128, 0.2) 0%, rgba(22, 163, 74, 0.1) 100%)",borderRadius:"50% 50% 50% 50% / 50% 50% 50% 50%"},animate:{borderRadius:["50% 50% 50% 50% / 50% 50% 50% 50%","60% 40% 40% 60% / 60% 60% 40% 40%","50% 50% 50% 50% / 50% 50% 50% 50%"]},transition:{duration:8,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"}}),(0,r.jsx)(s.P.div,{variants:F,animate:"animate",className:"relative z-10 flex items-center justify-center h-full p-8 lg:p-12",children:(0,r.jsx)(x.default,{src:"/icon-login.png",alt:"Performance Evaluation Illustration",width:500,height:500,className:"w-full max-w-[200px] sm:max-w-[280px] lg:max-w-md h-auto drop-shadow-2xl",priority:!0})})]})]})}),(0,r.jsx)(h,{isOpen:C,onClose:()=>I(!1)}),(0,r.jsx)(U,{isOpen:T,onClose:()=>k(!1),userData:R,onSecurityUpdate:t=>{a(t),p.oR.success("Seguridad actualizada con \xe9xito"),e.push("/post-login")}}),(0,r.jsx)(V,{isOpen:_,onClose:()=>z(!1)})]})}},14085:(e,a,t)=>{t.d(a,{$:()=>c});var r=t(95155),s=t(12115),i=t(12317),n=t(31027),o=t(29602);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,a)=>{let{className:t,variant:s,size:n,asChild:c=!1,...d}=e,u=c?i.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:s,size:n,className:t})),ref:a,...d})});c.displayName="Button"},9955:(e,a,t)=>{t.d(a,{p:()=>n});var r=t(95155),s=t(12115),i=t(29602);let n=s.forwardRef((e,a)=>{let{className:t,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n})});n.displayName="Input"},29602:(e,a,t)=>{t.d(a,{cn:()=>i});var r=t(43463),s=t(69795);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}}}]);