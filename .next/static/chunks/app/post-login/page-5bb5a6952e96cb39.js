(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{7956:(e,t,r)=>{Promise.resolve().then(r.bind(r,79157))},60285:(e,t,r)=>{"use strict";r.d(t,{J:()=>l,UserProvider:()=>n});var s=r(95155),a=r(12115);let o=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,a.useState)(null),[l,i]=(0,a.useState)(null);return(0,s.jsx)(o.Provider,{value:{userData:r,setUserData:n,user:l,setUser:i},children:t})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},79157:(e,t,r)=>{"use strict";r.d(t,{PostLoginView:()=>D});var s=r(95155),a=r(12115),o=r(76046),n=r(60285),l=r(39124),i=r(25683),d=r(5565),c=r(14085),u=r(29602);let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,u.cn)("w-full caption-bottom text-sm",r),...a})})});m.displayName="Table";let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,u.cn)("[&_tr]:border-b",r),...a})});f.displayName="TableHeader";let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,u.cn)("[&_tr:last-child]:border-0",r),...a})});x.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});h.displayName="TableRow";let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,u.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});p.displayName="TableHead";let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,u.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});v.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption";var g=r(73239),b=r(99053),N=r(61594);let j=0,y=new Map,w=e=>{if(y.has(e))return;let t=setTimeout(()=>{y.delete(e),S({type:"REMOVE_TOAST",toastId:e})},1e6);y.set(e,t)},_=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?w(r):e.toasts.forEach(e=>{w(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},E=[],T={toasts:[]};function S(e){T=_(T,e),E.forEach(e=>{e(T)})}function A(e){let{...t}=e,r=(j=(j+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>S({type:"DISMISS_TOAST",toastId:r});return S({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>S({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function O(){let e=(0,o.useRouter)(),{userData:t}=(0,n.J)(),{toast:r}=function(){let[e,t]=a.useState(T);return a.useEffect(()=>(E.push(t),()=>{let e=E.indexOf(t);e>-1&&E.splice(e,1)}),[e]),{...e,toast:A,dismiss:e=>S({type:"DISMISS_TOAST",toastId:e})}}(),[u,N]=(0,a.useState)([]),[j,y]=(0,a.useState)(!1),[w,_]=(0,a.useState)(""),[O,D]=(0,a.useState)(""),[I,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{k(!0),(null==t?void 0:t.CEDULA)&&P(t.CEDULA.toString())},[t]);let P=async e=>{y(!0),_("");try{let t=await fetch("https://evaluacion-de-desempeno.onrender.com/get_employees_under_leader?cedula=".concat(e,"&year=2025")),s=await t.json();if(!t.ok)throw Error(s.error||"Error al obtener los empleados");if(s.success)N(s.employees),0===s.employees.length&&r({description:"No se encontraron empleados para este l\xedder"});else throw Error(s.error||"Error desconocido")}catch(t){let e=t instanceof Error?t.message:"Error al cargar los empleados";_(e),r({variant:"destructive",title:"Error",description:e})}finally{y(!1)}},M=u.filter(e=>{let t=O.toLowerCase();return e.nombre.toLowerCase().includes(t)||e.cargo.toLowerCase().includes(t)||e.cedula.includes(O)}),U=async t=>{try{let r=await fetch("https://evaluacion-de-desempeno.onrender.com/get_user_details?cedula=".concat(t));if(!r.ok)throw Error("Error al obtener los detalles del usuario");let s=await r.json(),a={historial:{},datos:{nombres:s.nombre||"",cedula:s.cedula||"",cargo:s.cargo||"",jefe:s.lider_evaluador||"",cargoJefe:s.cargo_de_lider_evaluador||"",area:s.centro_de_costo||""},valores:{compromiso:0,honestidad:0,respeto:0,sencillez:0,servicio:0,trabajo_equipo:0,conocimiento_trabajo:0,productividad:0,cumple_sistema_gestion:0},acuerdos:{colaborador_acuerdos:"",jefe_acuerdos:"",desarrollo_necesidades:"",aspectos_positivos:""}};e.push("/formulario?formData=".concat(encodeURIComponent(JSON.stringify(a))))}catch(e){console.error("Error al iniciar la evaluaci\xf3n:",e),r({variant:"destructive",title:"Error",description:"No se pudo iniciar la evaluaci\xf3n. Por favor, intente nuevamente."})}};return I?(0,s.jsx)("div",{className:"min-h-screen w-full bg-gradient-to-br from-green-50 to-green-100 p-4 md:p-8",children:(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-7xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden",children:(0,s.jsxs)("div",{className:"relative z-10 p-6 md:p-12",children:[(0,s.jsxs)("header",{className:"text-center mb-12",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,s.jsx)(d.default,{src:"/sao6.png",alt:"Company Logo",width:100,height:100,className:"mr-4"}),(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-green-700",children:"Gesti\xf3n de Evaluaciones"})]}),(0,s.jsxs)("p",{className:"text-gray-600 text-xl md:text-2xl",children:["Bienvenido, ",(0,s.jsx)("span",{className:"font-semibold text-green-600",children:null==t?void 0:t.NOMBRE})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:j?(0,s.jsx)(R,{}):w?(0,s.jsx)(C,{message:w}):(0,s.jsx)("div",{className:"overflow-x-auto",children:u.length>0?(0,s.jsxs)(m,{children:[(0,s.jsx)(f,{children:(0,s.jsxs)(h,{className:"bg-green-100",children:[(0,s.jsx)(p,{className:"font-bold text-green-800",children:"Nombre"}),(0,s.jsx)(p,{className:"font-bold text-green-800",children:"C\xe9dula"}),(0,s.jsx)(p,{className:"font-bold text-green-800",children:"Cargo"}),(0,s.jsx)(p,{className:"font-bold text-green-800",children:"Acciones"})]})}),(0,s.jsx)(x,{children:(0,s.jsx)(i.N,{children:M.map((e,t)=>(0,s.jsxs)(l.P.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,delay:.05*t},className:"hover:bg-green-50 transition-colors duration-150",children:[(0,s.jsx)(v,{className:"font-medium",children:e.nombre}),(0,s.jsx)(v,{children:e.cedula}),(0,s.jsx)(v,{children:e.cargo}),(0,s.jsx)(v,{children:e.evaluado_este_ano?(0,s.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,s.jsx)(g.A,{className:"mr-2 h-5 w-5"}),"Ya evaluado"]}):(0,s.jsxs)(c.$,{onClick:()=>U(e.cedula),className:"bg-green-500 hover:bg-green-600 text-white transition-colors duration-150",children:["Iniciar Evaluaci\xf3n",(0,s.jsx)(b.A,{className:"ml-2",size:16})]})})]},e.cedula))})})]}):(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No se encontraron empleados para este l\xedder"})})})]})})}):null}let R=()=>(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"w-1/5 h-8 bg-green-100 rounded animate-pulse"}),(0,s.jsx)("div",{className:"w-1/5 h-8 bg-green-100 rounded animate-pulse"}),(0,s.jsx)("div",{className:"w-1/5 h-8 bg-green-100 rounded animate-pulse"}),(0,s.jsx)("div",{className:"w-1/5 h-8 bg-green-100 rounded animate-pulse"}),(0,s.jsx)("div",{className:"w-1/5 h-8 bg-green-100 rounded animate-pulse"})]},t))}),C=e=>{let{message:t}=e;return(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(N.A,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),(0,s.jsx)("p",{className:"text-xl text-red-600 font-semibold",children:t})]})};function D(){let e=(0,o.useRouter)(),{userData:t}=(0,n.J)(),r=(null==t?void 0:t.CARGO.startsWith("DIRECTOR"))||(null==t?void 0:t.CARGO.startsWith("COORDINADOR"));return((0,a.useEffect)(()=>{r||e.push("/formulario")},[r,e]),r)?(0,s.jsx)(O,{}):null}},14085:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(95155),a=r(12115),o=r(12317),n=r(31027),l=r(29602);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:d=!1,...c}=e,u=d?o.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(i({variant:a,size:n,className:r})),ref:t,...c})});d.displayName="Button"},29602:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var s=r(43463),a=r(69795);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[662,19,441,517,358],()=>t(7956)),_N_E=e.O()}]);